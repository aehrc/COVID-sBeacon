<div id="seqBox" layout="column" >
  <!-- Responsive table starts here -->
  <!-- For correct display on small screens you must add 'data-title' to each 'td' in your table -->

  <md-card>
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">Search engine for SARS-CoV-2 mutations </span>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <div layout="row">
          <form name="quick">
            <md-input-container ng-show="sMin == null && sMax == null && eMin == null && eMax == null">
              <!--<label>Query Position REF>ALT</label>-->
              <div data-tip="(Start coordinate position) (REF)>(ALT).">
                <input id="search" placeholder="8781 C>T" ng-model="inputText" ng-required="!sMin"  ng-keyup="$event.keyCode == 13 && query()"">
              </div>
            </md-input-container>
          </form>
        </div>
        <div ng-show="isVisible">
          <div layout="row">
            <form name="detail">

              <md-input-container>
                <label>Reference</label>
                <div data-tip="Reference bases for this variant (starting from start).">
                  <input  type="text"  ng-model="ref" ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>Alternate</label>
                <div data-tip="The bases that appear instead of the reference bases.">
                  <input type="text" ng-model="alt"  ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>Start min</label>
                <div data-tip="for querying imprecise positions (e.g. identifying all structural variants starting anywhere between startMin <-> startMax, and ending anywhere between endMin <-> endMax">
                  <input  ng-model="sMin" ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>Start Max</label>
                <div data-tip="Maximum start coordinate">
                  <input  ng-model="sMax" ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>End min</label>
                <div data-tip="Minimum end coordinate">
                  <input  ng-model="eMin" ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>End Max</label>
                <div data-tip="Maximum end coordinate">
                  <input  ng-model="eMax" ng-required="!inputText">
                </div>
              </md-input-container>

              <md-input-container>
                <label>Variant Type</label>
                <div data-tip="The variantType is used to denote e.g. structural variants. Accepted Values 'INS','DUP','DEL','INV'">
                  <input type="text" ng-model="VarType" >
                </div>
              </md-input-container>

              <md-input-container>
                <label>Dataset Ids</label>
                <div data-tip="Identifiers of datasets, as defined in BeaconDataset. ">
                  <input type="text" ng-model="dIDs">
                </div>
              </md-input-container>
            </form>
          </div>
        </div>
        <div layout="row">
        <md-button ng-disabled="quick.$invalid || detail.$invalid " class="md-raised md-primary"  ng-click="query()" >Search</md-button>
        <md-button ng-disabled="false" class="md-raised md-primary" ng-click="ShowHide()">Advanced Parameters</md-button>
        <md-button class="md-raised md-primary" ng-click="refresh()">Reset</md-button>
        </div>

      </md-card-content>
    </md-card>

    <div  ng-show="loading">
           <div class="row justify-content-center spinner-container">
             <div id="spinner"></div>
           </div>
    </div>

  <br></br>
  <md-card >
    <md-card-content ng-show="warning != null">
      <span> {{warning}}</span>
    </md-card-content>
    <md-card-content ng-show="hits != null">
      <div class="table-responsive-md">
        <table border="1" class=" table table-striped table-bordered table-hover" id="t01" fixed-header>
            <thead>
                <tr>
                    <th></th>
                    <th title="Dataset or Clade name ">Dataset name</th>
                    <th>Description</th>
                    <th>Variant count</th>
                    <th>Call Count</th>
                    <th title="Percentage of sample that contains the mutation." ng-if="sMin">Sample Coverage</th>
                    <th title="Total number of sample in the dataset.">Sample Count</th>
                    <th>Frequency</th>
                </tr>
            </thead>
            <tbody>
              <tr ng-repeat-start="row in hits"  ng-click="main.activeRow = !main.activeRow" id="sameStrip">
                <td>
                  <button ng-if="main.activeRow" >-</button>
                  <button ng-if="!main.activeRow" >+</button>
                </td>
                <td>{{row.name}}</td>
                <td>{{row.description}}</td>
                <td>{{row.variantCount}}</td>
                <td>{{row.callCount}}</td>
                <td ng-if="sMin">{{(row.sampleCount/row.totalSampleCount)*100 | number}} %</td>
                <td>{{row.totalSampleCount}}</td>
                <td>{{(row.frequency)*100 | number}} %</td>
              </tr>
              <tr ng-show="main.activeRow" ng-repeat-end="">
                <td colspan=7>
                  <table border="1" class=" table table-striped table-bordered table-hover" id="t01" fixed-header ng-show="main.activeRow">
                      <thead>
                          <tr>
                            <th> Variant</th>
                            <th> PhyoP44wayCoV score</th>
                            <th> PhastCons44wayCoV score</th>
                            <th> SIFT score</th>
                          </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="var in row.info.variants track by $index">

                            <td>{{var.Variant}}</td>
                            <td> <span ng-if="var.PhyoP44wayCoV_score"> {{var.PhyoP44wayCoV_score }} </span> <span ng-if="!var.PhyoP44wayCoV_score"> - </span></td>
                            <td><span ng-if="var.PhastCons44wayCoV_score"> {{var.PhastCons44wayCoV_score }} </span><span ng-if="!var.PhastCons44wayCoV_score"> - </span></td>
                            <td><span ng-if="var.SIFT_score"> {{var.SIFT_score }} </span><span ng-if="!var.SIFT_score"> - </span></td>

                        </tr>
                      </tbody>
                  </table>
                  </td>
              </tr>


            </tbody>
          <table>
        </div>
    </md-card-content>


    </md-card>
</div>
